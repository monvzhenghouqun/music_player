- ## **通用接口**：

### 1. 歌曲列表
| 接口                     | 方法      | 说明                                |
| ------------------------ | -------- | ----------------------------------- |
| `/songslist/:id`            | `GET`    | 获取歌曲详情                             |

约定的JSON格式：
```json
{
    "songs":[
        {   
            "id": ,
            "title": "",
            "artist": [],
            "album": "", // 专辑
            "lyricist": "", // 作词
            "lyrics": "", // 歌词
            "composer": "", // 作曲
            "language": "", // 语言
            "genre": "", // 流派
            "record_company": "", // 唱片公司
            "duration": "", // 时长
            "filepath": "", // mp3的地址
            "url": "", // 封面图的地址
            "is_deleted": "",
            "created_at": ""
        },
        {"id": ,"title": "","artist": [],"album": "","lyricist": "","composer": "","language": "","genre": "", "record_company": "","duration": "","filepath": "","url": "","is_deleted": "","created_at": ""},
   
    ]
    
}
```


### 2. 歌单歌曲
| 接口                     | 方法      | 说明                                |
| ------------------------ | -------- | ----------------------------------- |
| `/playlist_songs/:id`            | `GET`    | 获取歌单中的歌曲列表                             |

约定的JSON格式：
```json
{
    "id": ,
    "count": , // 歌单歌曲数量
    "songs": [
        { 
            "song_id": , 
            "title": "", 
            "artist": [],
            "album": "", // 专辑
            "duration": "", // 时长
            "url": "", // 封面图的地址

            "type": , // normal / loved / auto
            "position":  // 序号
        },
        { "id": , "title": "", "artist": "", "album": "", "duration": "", "url": "", "type": , "position": }
    ]
}
```


### 3. 歌单
| 接口                     | 方法      | 说明                                |
| ------------------------ | -------- | ----------------------------------- |
| `playlists/:id`            | `GET`    | 获取单个歌单信息                             |

约定的JSON格式：
```json
{
    "id": ,
    "title": "",
    "creator_id": ,
    "user_id": ,
    "play_count": ,
    "song_count": ,
    "type": "", // private / loved / public
    "url": "", // 封面图的地址
    "created_at": "",
    "added_at": "",
}
```


- ## **发现页面**

分为每日推荐和热门推荐功能
- 1. 每日推荐：
设置条件实现实时更新决策树，并使用二进制固化进数据库中

| 接口                     | 方法      | 说明                                |
| ------------------------ | -------- | ----------------------------------- |
| `/recommendations/daily`            | `GET`    | 实时构建决策树，根据用户历史偏好筛选今日歌曲           |

约定的JSON格式：
```json
{
    "count": , // 歌曲数量
    "songs": [
        { 
            "song_id": , 
            "title": "", 
            "artist": [],
            "album": "", // 专辑
            "duration": "", // 时长
            "url": "" // 封面图的地址
        },
        { "id": , "title": "", "artist": "", "album": "", "duration": "", "url": ""}
    ]
}
```

- 2. 热门推荐（也算是通用接口？）：
请求多个歌单信息列出推荐收藏量较多的随机十个歌单 -> 点击歌单后请求歌单中的歌曲信息 -> 点击歌曲后请求单个歌曲信息

| 接口                     | 方法      | 说明                                |
| ------------------------ | -------- | ----------------------------------- |
| `/recommendations/popular`            | `GET`    | 返回收藏量或播放量较高的10个随机歌单           |

约定的JSON格式：
```json
{
    "count": , // 实际返回的歌单数量
    "playlists": [
        {
            "id": 1, // 歌单ID
            "title": "", // 歌单名称
            "creator_id": , // 创建者ID
            "type": "", // 歌单类型
            "url": "", // 封面图地址
            "collect_count": , // 收藏量
            "play_count": , // 播放量
            "song_count":  // 包含歌曲数量
        },
        // ... 更多歌单
    ]
}
```


- ## **搜索**
后端设置了字典树（Trie）实现类似于网易云的模糊搜索功能

| 接口                     | 方法      | 说明                                |
| ------------------------ | -------- | ----------------------------------- |
| `/search`            | `GET`    | 搜索歌词息                             |

约定的JSON格式：
```json
{
    "count": ,
    "songs": [
        { 
            "id": , 
            "title": "", 
            "artist": [],
            "position": 
        },
        { "id": , "title": "", "artist": "", "position":}
    ]
}
```


