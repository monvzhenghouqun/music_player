
# 接口文档 (V1.3)


## 1. 基础接口

**Base URL**: `http://localhost:5000`

## 2. 通用接口

### 2.1 获取歌单详情 (包括热门歌单和标准歌单)

用于点击某个歌单后，获取该歌单的详细信息及其包含的所有歌曲。

-   **接口地址**: `/songslists/:id`
    
-   **请求方法**: `GET`
    
-   **参数**: `id` (歌单唯一标识) ，`user_id` （具体用户_是否喜欢歌曲）           

-   **响应格式**:    
    

JSON

```
{
    "id": 50,    //歌单标识
    "title": "歌单名",
    "songs": [
        {
            "id": "歌曲id",
            "song_id": "歌曲id",
            "title": "",
            "artist": [""],
            "album": "",
            "duration": "",    // 时长 4:53
            "filepath": "./assets/music/popular/test1.mp3",   //歌曲地址
            "url": "./assets/cover/cover_song/test1.jpg",   //歌曲封面地址
            "lyrics": "歌词内容...",
            "lyricist": "",
            "composer": "",
            "language": "",
            "genre": "",
            "record_company": "",
            "is_deleted": "",
            "created_at": ""
            "is_loved": ""
        }
        ...
    ]
}
```

注：目前id标识为热门推荐歌单id为前8，排行榜9，10
喜欢歌单为11，听歌排行歌单为12，其他标准歌单从13开始
（暂定）

### 2.2 获取标准歌单 （我创建的歌单->我喜欢的歌单）

用于我的歌单界面中，渲染我创建的歌单内我喜欢的歌单。

-   **接口地址**: `/my/my_songlists_1_like`
    
-   **请求方法**: `GET`
    
-   **参数**: `id` (歌单唯一标识)             

-   **响应格式**:    
    

JSON

```
{
		count: 1,
		playlists: [
					{
							playlist_id: 50,
							title: "大手子致敬",
							creater_id: 10,
							type: "a",
							url: "./assets/cover/cover_playlist/test1.jpg",
							collect_count: 10,
							play_count: 10,
							song_count: 1
          },
          ...
}
```
### 2.3 获取标准歌单 （我创建的歌单->历史播放记录歌单）

用于我的歌单界面中，渲染我创建的歌单中历史播放记录歌单。


-   **接口地址**: `/my/my_songlists_1_recent`
    
-   **请求方法**: `GET`
    
-   **参数**: `id` (歌单唯一标识)             

-   **响应格式**:    
    

JSON

```
{
		count: 1,
		playlists: [
					{
							playlist_id: 50,
							title: "大手子致敬",
							creater_id: 10,
							type: "a",
							url: "./assets/cover/cover_playlist/test1.jpg",
							collect_count: 10,
							play_count: 10,
							song_count: 1
          },
          ...
}
```

### 2.4 获取标准歌单 （我创建的歌单->标准歌单）

用于我的歌单界面中，渲染我创建的歌单中标准歌单。


-   **接口地址**: `/my/my_songlists_1`
    
-   **请求方法**: `GET`
    
-   **参数**: `id` (歌单唯一标识)             

-   **响应格式**:    
    

JSON

```
{
		count: 4,
		playlists: [
					{
							playlist_id: 50,
							title: "大手子致敬",
							creater_id: 10,
							type: "a",
							url: "./assets/cover/cover_playlist/test1.jpg",
							collect_count: 10,
							play_count: 10,
							song_count: 1
          },
          ...
}
```
注：关键数据为1.返回的playlists数量和其内容，2.count数量，count为0即用户无创建歌单，未返回报错 ,playlist结构同热门歌单
### 2.5 获取标准歌单 （我收藏的歌单）

用于我的歌单界面中，渲染我创建的歌单。
注：传输结构为：(收藏的标准歌单（n）)，无返回空值

-   **接口地址**: `/my/my_songlists_2`
    
-   **请求方法**: `GET`
    
-   **参数**: `id` (歌单唯一标识)             

-   **响应格式**:    
    

JSON

```
{
		count: 4,
		playlists: [
					{
							playlist_id: 50,
							title: "大手子致敬",
							creater_id: 10,
							type: "a",
							url: "./assets/cover/cover_playlist/test1.jpg",
							collect_count: 10,
							play_count: 10,
							song_count: 1
          },
          ...
}
```
注：id是关键数据，关键数据为返回的playlists数量和其内容，还有count，count为0即用户无收藏歌单，未返回报错 ,playlist结构同热门歌单

## 3. 发现页 (Discovery)

### 3.1 每日推荐歌曲

基于用户偏好，通过后端决策树算法实时生成的推荐歌曲列表。

-   **接口地址**: `/recommendations/daily`
    
-   **请求方法**: `GET`
    
-   **响应格式**:
    

JSON

```
{
    "songs": [
        {
            id: "101",
					  song_id: "101", //兼容字段 //测试
						title: "1",
						artist: ["man"],
						album: "man", //专辑
						lyricist: "", //作词
						composer: "", //作曲
						language: "", //语言
						genre: "", //流派
						record_company: "", //唱片公司
						duration: "3:43", //时长
						filepath: "./assets/music/daily/test1.mp3", // 音乐地址
						url: "./assets/cover/cover_song/test1.jpg", // 封面图地址
						lyrics: "歌词第一句\n歌词第二句", //歌词
						is_deleted:"",
						created_at:""
        }
        ...
    ]
}
```
注：返回的是完整的歌曲集合，有几个生成几首歌曲

### 3.2 热门推荐歌单

返回系统中热门歌单。

-   **接口地址**: `/recommendations/popular`
    
-   **请求方法**: `GET`
    
-   **响应格式**:
    

JSON

```
{
 
		count: 4,
		playlists: [
					{
							playlist_id: 50,
							title: "大手子致敬",
							creater_id: 10,
							type: "a",
							url: "./assets/cover/cover_playlist/test1.jpg",
							collect_count: 10,
							play_count: 10,
							song_count: 1
          },
          ...
}
```
注：id和count都不是关键数据，关键数据为返回的playlists数量和其内容

## 4. 排行榜 (Rank)

### 4.1 全局排行榜（左侧）

基于全站数据，实时给出排行榜单数据。

-   **接口地址**: `/rank/public`
    
-   **请求方法**: `GET`
    
-   **响应格式**:
    

JSON

```
{
    "songs": [
        {
            id: "101",
					  song_id: "101", //兼容字段 //测试
						title: "1",
						artist: ["man"],
						album: "man", //专辑
						lyricist: "", //作词
						composer: "", //作曲
						language: "", //语言
						genre: "", //流派
						record_company: "", //唱片公司
						duration: "3:43", //时长
						filepath: "./assets/music/daily/test1.mp3", // 音乐地址
						url: "./assets/cover/cover_song/test1.jpg", // 封面图地址
						lyrics: "歌词第一句\n歌词第二句", //歌词
						is_deleted:"",
						created_at:""
						is_loved: ""
        }
        ...
    ]
}
```
注：返回的是完整的歌曲集合，必定是十个，格式和首页每日推荐一样

### 4.2 个人排行榜（右侧）

基于个人数据，实时给出排行榜单数据。

-   **接口地址**: `/rank/users`
    
-   **请求方法**: `GET`
    
-   **响应格式**:
    

JSON

```
{
    "songs": [
        {
            id: "101",
					  song_id: "101", //兼容字段 //测试
						title: "1",
						artist: ["man"],
						album: "man", //专辑
						lyricist: "", //作词
						composer: "", //作曲
						language: "", //语言
						genre: "", //流派
						record_company: "", //唱片公司
						duration: "3:43", //时长
						filepath: "./assets/music/daily/test1.mp3", // 音乐地址
						url: "./assets/cover/cover_song/test1.jpg", // 封面图地址
						lyrics: "歌词第一句\n歌词第二句", //歌词
						is_deleted:"",
						created_at:""
						is_loved: ""
        }
        ...
    ]
}
```
注：返回的是完整的歌曲集合，必定是十个，格式和首页每日推荐一样


